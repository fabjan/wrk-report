# wrk-report

> Export wrk data in Plot HTML report

Currently working with [hdrHistogram data](http://hdrhistogram.org/) generated by [giltene/wrk2](https://github.com/giltene/wrk2).

## Installation

```
go get -u github.com/jgsqware/wrk-report
```

## Usage

```
wrk -t2 -c5 -d3s --timeout 2s -R100 --latency http://myService | wrk-report > report.html
```

## Multi-request with JSON

```json
[
  {
    "path": "/path-1",
    "body": "some content",
    "method": "GET",
    "headers": {
      "X-Custom-Header-1": "test 1",
      "X-Custom-Header-2": "test 2"
    }
  },
  {
    "path": "/path-2",
    "body": "some content",
    "method": "POST",
    "headers": {
      "X-Custom-Header-1": "test 3",
      "X-Custom-Header-2": "test 4"
    }
  }
]
```

```
docker run --rm -e FILENAME=report.html -v `pwd`:/data jgsqware/wrk-report:latest bash -c 'wrk -t2 -c5 -d3s --timeout 2s -R100 -s /scripts/multi-request-json.lua --latency http://myService | wrk-report > /data/$FILENAME'
```

### With docker

```
docker run --rm -e FILENAME=report.html -v `pwd`:/data jgsqware/wrk-report:latest bash -c 'wrk -t2 -c5 -d3s --timeout 2s -R100 --latency http://myService | wrk-report > /data/$FILENAME'
```

## Building

```
make
```

If you change the HTML template, you need go-bindata to be able to generate a new hdrhistogram.go.

```
go get -u github.com/a-urth/go-bindata/...
```

## Upcoming
- Parsing wrk result and generate report